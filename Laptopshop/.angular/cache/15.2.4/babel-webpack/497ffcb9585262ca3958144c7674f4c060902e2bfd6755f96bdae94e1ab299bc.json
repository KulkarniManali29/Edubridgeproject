{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, HostListener } from '@angular/core';\nlet PaymentComponent = class PaymentComponent {\n  constructor(http, orderService) {\n    this.http = http;\n    this.orderService = orderService;\n    this.title = 'laptopshop';\n    this.form = {};\n    this.paymentId = '';\n    this.error = '';\n    this.options = {\n      \"key\": \"\",\n      \"amount\": \"\",\n      \"name\": \"Manali kulkarni\",\n      \"description\": \"\",\n      \"image\": \"https://www.javachinna.com/wp-content/uploads/2020/02/android-chrome-512x512-1.png\",\n      \"order_id\": \"\",\n      \"handler\": function (response) {\n        var event = new CustomEvent(\"payment.success\", {\n          detail: response,\n          bubbles: true,\n          cancelable: true\n        });\n        window.dispatchEvent(event);\n      },\n      \"prefill\": {\n        \"name\": \"\",\n        \"email\": \"\",\n        \"contact\": \"\"\n      },\n      \"notes\": {\n        \"address\": \"\"\n      },\n      \"theme\": {\n        \"color\": \"#3399cc\"\n      }\n    };\n  }\n  ngOnInit() {}\n  sayHello() {\n    alert(\"Hello DK\");\n  }\n  onSubmit() {\n    this.paymentId = '';\n    this.error = '';\n    this.orderService.createOrder(this.form).subscribe(data => {\n      this.options.key = data.secretId;\n      this.options.order_id = data.razorpayOrderId;\n      this.options.amount = data.applicationFee; //paise\n      this.options.prefill.name = \"Manali kulkarni\";\n      this.options.prefill.email = \"kulkarnim997@gmail.com\";\n      this.options.prefill.contact = \"9373280950\";\n      if (data.pgName === 'razor2') {\n        this.options.image = \"\";\n        var rzp1 = new Razorpay(this.options);\n        rzp1.open();\n      } else {\n        var rzp2 = new Razorpay(this.options);\n        rzp2.open();\n      }\n      rzp1.on('payment.failed', function (response) {\n        // Todo - store this information in the server\n        console.log(response);\n        console.log(response.error.code);\n        console.log(response.error.description);\n        console.log(response.error.source);\n        console.log(response.error.step);\n        console.log(response.error.reason);\n        console.log(response.error.metadata.order_id);\n        console.log(response.error.metadata.payment_id);\n        //this.error = response.error.reason;\n      });\n    }, err => {\n      this.error = err.error.message;\n    });\n  }\n  onPaymentSuccess(event) {\n    console.log(event.detail);\n  }\n};\n__decorate([HostListener('window:payment.success', ['$event'])], PaymentComponent.prototype, \"onPaymentSuccess\", null);\nPaymentComponent = __decorate([Component({\n  selector: 'app-payment',\n  templateUrl: './payment.component.html',\n  styleUrls: ['./payment.component.css']\n})], PaymentComponent);\nexport { PaymentComponent };","map":{"version":3,"mappings":"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","names":["Component","HostListener","PaymentComponent","constructor","http","orderService","response","event","CustomEvent","detail","bubbles","cancelable","window","dispatchEvent","ngOnInit","sayHello","alert","onSubmit","paymentId","error","createOrder","form","subscribe","data","options","key","secretId","order_id","razorpayOrderId","amount","applicationFee","prefill","name","email","contact","pgName","image","rzp1","Razorpay","open","rzp2","on","console","log","code","description","source","step","reason","metadata","payment_id","err","message","onPaymentSuccess","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\admin\\Desktop\\ProjectJava\\laptopshop\\src\\app\\payment\\payment.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, HostListener } from '@angular/core';\nimport { OrderServiceService } from '../order-service/order-service.component';\ndeclare var Razorpay: any;\n@Component({\n  selector: 'app-payment',\n  templateUrl: './payment.component.html',\n  styleUrls: ['./payment.component.css']\n})\nexport class PaymentComponent {\n  title = 'laptopshop';\n\n  form: any = {}; \n  constructor(private http: HttpClient,\n    private orderService:OrderServic) {\n\n  }\n\n  ngOnInit() {\n    \n\n  }\n\n  sayHello() {\n    alert(\"Hello DK\");\n  }\n\n  paymentId: string='';\n  error: string='';\n  \n  options = {\n    \"key\": \"\",\n    \"amount\": \"\", \n    \"name\": \"Manali kulkarni\",\n    \"description\": \"\",\n    \"image\": \"https://www.javachinna.com/wp-content/uploads/2020/02/android-chrome-512x512-1.png\",\n    \"order_id\":\"\",\n    \"handler\": function (response:any){\n      var event = new CustomEvent(\"payment.success\", \n        {\n          detail: response,\n          bubbles: true,\n          cancelable: true\n        }\n      );\t  \n      window.dispatchEvent(event);\n    }\n    ,\n    \"prefill\": {\n    \"name\": \"\",\n    \"email\": \"\",\n    \"contact\": \"\"\n    },\n    \"notes\": {\n    \"address\": \"\"\n    },\n    \"theme\": {\n    \"color\": \"#3399cc\"\n    }\n    };\n  \n    onSubmit(): void {\n      this.paymentId = ''; \n      this.error = ''; \n      this.orderService.createOrder(this.form).subscribe(\n      data => {\n        this.options.key = data.secretId;\n        this.options.order_id = data.razorpayOrderId;\n        this.options.amount = data.applicationFee; //paise\n        this.options.prefill.name = \"Manali kulkarni\";\n        this.options.prefill.email = \"kulkarnim997@gmail.com\";\n        this.options.prefill.contact =\"9373280950\";\n        \n        if(data.pgName ==='razor2') {\n          this.options.image=\"\";\n          var rzp1 = new Razorpay(this.options);\n          rzp1.open();\n        } else {\n          var rzp2 = new Razorpay(this.options);\n          rzp2.open();\n        }\n       \n                \n        rzp1.on('payment.failed', function (response:any){    \n          // Todo - store this information in the server\n          console.log(response);\n          console.log(response.error.code);    \n          console.log(response.error.description);    \n          console.log(response.error.source);    \n          console.log(response.error.step);    \n          console.log(response.error.reason);    \n          console.log(response.error.metadata.order_id);    \n          console.log(response.error.metadata.payment_id);\n          //this.error = response.error.reason;\n        }\n        );\n      }\n      ,\n      err => {\n        this.error = err.error.message;\n      }\n      );\n    }\n\n    @HostListener('window:payment.success', ['$event']) \n    onPaymentSuccess(event:any): void {\n       console.log(event.detail);\n    }\n}\n\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}